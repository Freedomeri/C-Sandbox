#第十九节 游戏UI切换和绘制背包UI   
    
##19.1 游戏UI切换   
1、**游戏UI切换**    
（1）先完善暂停功能，去SlAiPlayerController.cpp修改一下代码：    
![](https://i.imgur.com/uKQhvUe.png)     
接下来我们来实现ShowGameUI,我们来到SSlAiGameHUDWidget.cpp:     
![](https://i.imgur.com/2e2Of0m.png)    
为了先看效果，我们来到SSlAiChatRoomWidget.cpp添加如下代码：   
![](https://i.imgur.com/Pjdp1eJ.png)    
再去SSlAiPackageWidget.cpp添加同样代码：   
![](https://i.imgur.com/t2CFwKD.png)     
再去SSlAiGameMenuWidget.cpp添加同样代码：   
![](https://i.imgur.com/kVvfAR2.png)     
现在我们在回到SlAiPlayerController.cpp:    
![](https://i.imgur.com/9jACQ5Z.png)    
![](https://i.imgur.com/D62rj7v.png)    
然后我们就可以运行游戏看一下效果：    
![](https://i.imgur.com/74Cr9MD.png)    
然后我们制作锁住输入的部分，来到SlAiPlayerCharacher.h添加如下代码：   
![](https://i.imgur.com/2BjQmQH.png)     
然后去cpp文件实现：   
![](https://i.imgur.com/HnrJpvL.png)     
然后来到SlAiPlayerController.cpp下添加判断：     
![](https://i.imgur.com/7NdGJMx.png)     
![](https://i.imgur.com/1UpU44g.png)      
![](https://i.imgur.com/7AQdDLV.png)      
![](https://i.imgur.com/YagAnd5.png)     
![](https://i.imgur.com/RIXvnqK.png)     
回到头文件，添加一个方法：    
![](https://i.imgur.com/FRkKcDN.png)      
然后实现它：   
![](https://i.imgur.com/NuOi9tk.png)     
![](https://i.imgur.com/vM85lPp.png)      
![](https://i.imgur.com/HJ7AvKh.png)    
![](https://i.imgur.com/AVgtd6b.png)    
现在还需要去SlAiPlayerCharacter.cpp下添加判断：   
![](https://i.imgur.com/0bYKKxo.png)     
![](https://i.imgur.com/EwaAqWy.png)     
![](https://i.imgur.com/OE88VN0.png)     
![](https://i.imgur.com/fnenax2.png)    
![](https://i.imgur.com/DvMU8UV.png)     
![](https://i.imgur.com/HzJzn5z.png)     
现在我们就可以运行来看看效果了。    
##19.2 绘制背包UI   
1、**绘制背包**    
（1）我们打开ue4，我们先创建需要的类：   
![](https://i.imgur.com/7gfXT4D.png)     
![](https://i.imgur.com/yAxkiID.png)    
![](https://i.imgur.com/Xm5HUkv.png)     
![](https://i.imgur.com/IDyGPdQ.png)     
![](https://i.imgur.com/i2Egyka.png)     
![](https://i.imgur.com/Vpsxy9L.png)     
接下来打开vs，来到SSAiContainerInputWidget.h,修改头文件:     
![](https://i.imgur.com/h6K2mk3.png)     
再修改它的父类：    
![](https://i.imgur.com/fYzbHOv.png)     
对其余的几个刚才创建的类也做同样处理，那么准备工作就做完了。    
（2）我们先实现SSlAiContainerBaseWidget.h:    
![](https://i.imgur.com/YrzBaLE.png)     
![](https://i.imgur.com/dWkGARi.png)     
然后去cpp文件：   
![](https://i.imgur.com/qKwPBJ7.png)   
然后我们去到SlAiTypes.h再添加一个枚举:   
![](https://i.imgur.com/y1DRKnW.png)    
接下来去SSlAiContainerBaseWidget.h接着写，先引入头文件SlAiType.h：   
![](https://i.imgur.com/SEp6f74.png)     
然后去cpp文件实现它：   
![](https://i.imgur.com/PsTRJwZ.png)    
![](https://i.imgur.com/e0ylUfq.png)    
现在我们去给四个子类添加workIndexz:   
![](https://i.imgur.com/qx2HKVO.png)     
![](https://i.imgur.com/KdyMVbe.png)     
然后我们去到SSlAiContainerShortcutWidget.cpp:    
![](https://i.imgur.com/4dvktfk.png)    
之后打开刚才4个.h文件的cpp文件，仍然全部替换：    
![](https://i.imgur.com/EyBxVzR.png)         
我们回到SSlAiContainerBaseWidget.cpp：    
![](https://i.imgur.com/vMV16IM.png)      
现在我们去到SSlAiPackageWidget.h:    
![](https://i.imgur.com/I4BRctr.png)    
![](https://i.imgur.com/7fZgAS1.png)    
然后我们去SlAiGameWidgetStyle.h定义两个笔刷：     
![](https://i.imgur.com/t5g2P6C.png)     
然后回到SSlAiPackageWidget.cpp接着写：   
![](https://i.imgur.com/Bjxw8E8.png)  
再去SSlAiPackageWidget.h下添加3个控件：    
![](https://i.imgur.com/snq3ggO.png)     
然后回去再接着写：   
![](https://i.imgur.com/J9OMfzw.png)      
然后我们再去SSlAiPackageWidget.h添加指针：   
![](https://i.imgur.com/VPYwjDB.png)    
再回去接着写：   
![](https://i.imgur.com/OkQLx2Z.png)    
现在去SSlAiPackageWidget.h再添加一个方法：    
![](https://i.imgur.com/XeLpl2A.png)      
我们去cpp文件中实现它：     
![](https://i.imgur.com/j4oPq2x.png)      
记得添加头文件，先给他的.h文件添加SlAiTypes.h，然后来到他的cpp文件：    
![](https://i.imgur.com/awz3zCN.png)    
![](https://i.imgur.com/cjS9D4a.png)     
![](https://i.imgur.com/fM9MNEb.png)     
现在显示部分就做好了，我们先来到SlAiGameMode.h新建一个委托：   
![](https://i.imgur.com/sPjUjfU.png)      
然后给它创建一个变量：    
![](https://i.imgur.com/PU3zj1q.png)    
然后来到cpp文件：    
![](https://i.imgur.com/5Sm59j2.png)      
![](https://i.imgur.com/ZRMaHs1.png)      
![](https://i.imgur.com/txFKeHT.png)      
然后来到SlAiGameHUD.cpp,先添加头文件SSlAiPackageWidget.h:    
![](https://i.imgur.com/ZZVNdlT.png)      
然后我们再添加两个笔刷图片，就可以运行游戏看效果了：   
![](https://i.imgur.com/8Q8Qph0.png)    
![](https://i.imgur.com/q7zzZzP.png)    
![](https://i.imgur.com/6vqPuAR.png)    
